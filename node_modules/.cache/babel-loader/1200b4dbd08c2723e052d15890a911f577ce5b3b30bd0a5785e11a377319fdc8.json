{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S572127\\\\Projects\\\\ChargerLocator-Windows\\\\src\\\\components\\\\forgot-password.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ForgotPassword() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [securityQuestion, setSecurityQuestion] = useState(\"\");\n  const [securityAnswer, setSecurityAnswer] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isQuestionFetched, setIsQuestionFetched] = useState(false);\n  const navigate = useNavigate();\n\n  // Fetch security question based on the email\n  const fetchSecurityQuestion = async () => {\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/get-security-question\", {\n        email\n      });\n      if (response.data.securityQuestion) {\n        setSecurityQuestion(response.data.securityQuestion);\n        setIsQuestionFetched(true);\n        setError(\"\"); // Clear previous error messages\n      } else {\n        setError(\"No security question found for this email.\");\n        setIsQuestionFetched(false);\n      }\n    } catch (err) {\n      setError(\"Error fetching security question. Please try again.\");\n      setIsQuestionFetched(false);\n    }\n  };\n\n  // Handle the password reset logic\n  const handleForgotPassword = async e => {\n    e.preventDefault();\n    if (!isQuestionFetched) {\n      setError('Please fetch the security question first.');\n      return;\n    }\n    try {\n      const response = await axios.post('http://localhost:5000/api/auth/reset-password', {\n        email,\n        securityAnswer,\n        newPassword\n      });\n      setMessage(response.data.message || 'Password reset successful!');\n      navigate('/login');\n      setError('');\n    } catch (err) {\n      if (err.response && err.response.data && err.response.data.error) {\n        setError(err.response.data.error);\n      } else {\n        setError('Error resetting password. Please try again.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Forgot Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 1\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleForgotPassword,\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        placeholder: \"Enter your registered email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"form-button\",\n        onClick: fetchSecurityQuestion,\n        children: \"Fetch Security Question\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 1\n      }, this), isQuestionFetched && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Security Question:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontStyle: \"italic\"\n          },\n          children: securityQuestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Answer to Security Question:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: securityAnswer,\n          onChange: e => setSecurityAnswer(e.target.value),\n          placeholder: \"Enter your security answer\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"New Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value),\n          placeholder: \"Enter your new password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"form-button\",\n          children: \"Reset Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 1\n  }, this);\n}\n_s(ForgotPassword, \"pxn3UcXaDik3piGyqwKlYqbhIgw=\", false, function () {\n  return [useNavigate];\n});\n_c = ForgotPassword;\nexport default ForgotPassword;\nvar _c;\n$RefreshReg$(_c, \"ForgotPassword\");","map":{"version":3,"names":["React","useState","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","ForgotPassword","_s","email","setEmail","securityQuestion","setSecurityQuestion","securityAnswer","setSecurityAnswer","newPassword","setNewPassword","message","setMessage","error","setError","isQuestionFetched","setIsQuestionFetched","navigate","fetchSecurityQuestion","response","post","data","err","handleForgotPassword","e","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","onSubmit","type","value","onChange","target","placeholder","required","onClick","fontStyle","_c","$RefreshReg$"],"sources":["C:/Users/S572127/Projects/ChargerLocator-Windows/src/components/forgot-password.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from 'react-router-dom';\r\n \r\nfunction ForgotPassword() {\r\n    \r\n  const [email, setEmail] = useState(\"\");\r\n  const [securityQuestion, setSecurityQuestion] = useState(\"\");\r\n  const [securityAnswer, setSecurityAnswer] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isQuestionFetched, setIsQuestionFetched] = useState(false);\r\n  const navigate = useNavigate();\r\n \r\n  // Fetch security question based on the email\r\n  const fetchSecurityQuestion = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/auth/get-security-question\",\r\n        { email }\r\n      );\r\n      if (response.data.securityQuestion) {\r\n        setSecurityQuestion(response.data.securityQuestion);\r\n        setIsQuestionFetched(true);\r\n        setError(\"\"); // Clear previous error messages\r\n      } else {\r\n        setError(\"No security question found for this email.\");\r\n        setIsQuestionFetched(false);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error fetching security question. Please try again.\");\r\n      setIsQuestionFetched(false);\r\n    }\r\n  };\r\n \r\n  // Handle the password reset logic\r\n  const handleForgotPassword = async (e) => {\r\n    e.preventDefault();\r\n \r\n    if (!isQuestionFetched) {\r\n        setError('Please fetch the security question first.');\r\n        return;\r\n    }\r\n \r\n    try {\r\n        const response = await axios.post('http://localhost:5000/api/auth/reset-password', {\r\n            email,\r\n            securityAnswer,\r\n            newPassword,\r\n        });\r\n \r\n        setMessage(response.data.message || 'Password reset successful!');\r\n        navigate('/login');\r\n        setError('');\r\n    } catch (err) {\r\n        if (err.response && err.response.data && err.response.data.error) {\r\n            setError(err.response.data.error);\r\n        } else {\r\n            setError('Error resetting password. Please try again.');\r\n        }\r\n    }\r\n};\r\n \r\n  return (\r\n<div className=\"form-container\">\r\n<h2>Forgot Password</h2>\r\n      {message && <p style={{ color: \"green\" }}>{message}</p>}\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n<form onSubmit={handleForgotPassword} className=\"form\">\r\n<label>Email:</label>\r\n<input\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          placeholder=\"Enter your registered email\"\r\n          required\r\n        />\r\n<button\r\n          type=\"button\"\r\n          className=\"form-button\"\r\n          onClick={fetchSecurityQuestion}\r\n>\r\n          Fetch Security Question\r\n</button>\r\n \r\n        {isQuestionFetched && (\r\n<>\r\n<label>Security Question:</label>\r\n<p style={{ fontStyle: \"italic\" }}>{securityQuestion}</p>\r\n \r\n            <label>Answer to Security Question:</label>\r\n<input\r\n              type=\"text\"\r\n              value={securityAnswer}\r\n              onChange={(e) => setSecurityAnswer(e.target.value)}\r\n              placeholder=\"Enter your security answer\"\r\n              required\r\n            />\r\n \r\n            <label>New Password:</label>\r\n<input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              placeholder=\"Enter your new password\"\r\n              required\r\n            />\r\n<button type=\"submit\" className=\"form-button\">\r\n              Reset Password\r\n</button>\r\n</>\r\n        )}\r\n</form>\r\n</div>\r\n  );\r\n}\r\n \r\nexport default ForgotPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}